{% extends "base.html" %}
{% block content %}

<div class="topbar" style="margin:.5rem 0 1rem;">
  <a href="{{ url_for('week_view', start=prev_start) }}">â† ä¸Šä¸€é€±</a>
  <h3 style="margin:0;">é€±æª¢è¦–ï¼ˆ{{ days[0].strftime('%Y-%m-%d') }} ~ {{ days[-1].strftime('%Y-%m-%d') }}ï¼‰</h3>
  <a href="{{ url_for('week_view', start=next_start) }}">ä¸‹ä¸€é€± â†’</a>
</div>

<div class="header">
  <div>ä¸€</div><div>äºŒ</div><div>ä¸‰</div><div>å››</div><div>äº”</div><div>å…­</div><div>æ—¥</div>
</div>

<div class="calendar">
  {% for d in days %}
    {% set classes = "day" %}
    {% if d == today %}{% set classes = classes + " today" %}{% endif %}
    <div class="{{ classes }}">
      <div class="datebox">
        <a href="{{ url_for('day_view', datestr=d.strftime('%Y-%m-%d')) }}">{{ d.strftime('%m/%d') }}</a>
        <div style="display:flex; gap:.35rem; align-items:center;">
          {% if d in strength_dates %}
            <span class="strength-dot" title="ä»Šæ—¥æœ‰é‡è¨“">ğŸ‹ï¸</span>
          {% endif %}
          <a href="{{ url_for('add', date=d.strftime('%Y-%m-%d')) }}" class="muted">ï¼‹</a>
        </div>
      </div>

      {% for it in items_by_date.get(d, []) %}
        <div class="item">
          <span class="badge">{{ it.item_type }}</span>
          <div class="item-title">{{ it.title }}</div>
          <div><small>{{ it.time_range_str() }}</small></div>
          {% if it.content %}
            <div style="font-size:.85rem; color:#4b5563;">{{ it.content|truncate(60) }}</div>
          {% endif %}
          <div class="actions" style="margin-top:.2rem;">
            <a href="{{ url_for('edit', item_id=it.id) }}" class="secondary">ç·¨è¼¯</a>
            <form action="{{ url_for('delete', item_id=it.id) }}" method="post" style="display:inline;">
              <button class="outline" onclick="return confirm('ç¢ºå®šåˆªé™¤ï¼Ÿ')">åˆªé™¤</button>
            </form>
          </div>
        </div>
      {% endfor %}
    </div>
  {% endfor %}
</div>

{% endblock %}
